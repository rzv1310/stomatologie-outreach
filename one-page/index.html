<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Clinic Outreach</title>
  <meta name="description" content="Clinic outreach dashboard for seo-doctor.ro dental websites." />
  <meta name="robots" content="noindex, nofollow" />
  <meta name="theme-color" content="#0c0c14" />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ¦·</text></svg>" />
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #0c0c14;
      color: #e4e4e7;
      min-height: 100vh;
      padding: 2.5rem 1rem;
    }

    .header {
      max-width: 920px;
      margin: 0 auto 2.5rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 1rem;
    }

    .header h1 {
      font-size: 1.6rem;
      font-weight: 700;
      color: #f4f4f5;
      letter-spacing: -0.02em;
    }

    .stats {
      font-size: 0.875rem;
      color: #52525b;
      background: #18181b;
      padding: 0.5rem 1rem;
      border-radius: 10px;
      border: 1px solid #27272a;
    }

    .stats span {
      color: #c4b5fd;
      font-weight: 600;
    }

    .container {
      max-width: 920px;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }

    .clinic {
      background: linear-gradient(135deg, #16161d 0%, #1a1a24 100%);
      border: 1px solid #2a2a35;
      border-radius: 16px;
      padding: 1.5rem 1.75rem;
      transition: border-color 0.25s, opacity 0.3s, transform 0.2s;
    }

    .clinic:hover {
      border-color: #3f3f50;
      transform: translateY(-1px);
    }

    .clinic.done {
      opacity: 0.35;
      border-color: #22c55e22;
    }

    .clinic.done:hover {
      opacity: 0.5;
    }

    .clinic-top {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 1rem;
      margin-bottom: 0.625rem;
    }

    .clinic-name {
      font-size: 1.05rem;
      font-weight: 600;
      color: #f4f4f5;
      line-height: 1.3;
    }

    .clinic-meta {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: 0.375rem 0;
      font-size: 0.8125rem;
      color: #71717a;
      margin-bottom: 1.125rem;
    }

    .clinic-meta .sep {
      margin: 0 0.625rem;
      color: #3f3f46;
    }

    .clinic-meta a {
      color: #a5b4fc;
      text-decoration: none;
      transition: color 0.15s;
    }

    .clinic-meta a:hover {
      color: #c7d2fe;
      text-decoration: underline;
    }

    .script-box {
      background: #0e0e16;
      border: 1px solid #23232e;
      border-radius: 10px;
      padding: 1rem 1.25rem;
      font-size: 0.8125rem;
      color: #a1a1aa;
      line-height: 1.65;
      margin-bottom: 1rem;
      white-space: pre-wrap;
      word-break: break-word;
    }

    .script-box .script-link {
      color: #818cf8;
    }

    .actions {
      display: flex;
      gap: 0.625rem;
    }

    button {
      font-family: inherit;
      font-size: 0.8125rem;
      font-weight: 500;
      border: none;
      border-radius: 10px;
      padding: 0.5rem 1.125rem;
      cursor: pointer;
      transition: background 0.15s, transform 0.1s, box-shadow 0.15s;
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
    }

    button:active {
      transform: scale(0.96);
    }

    .btn-copy {
      background: #4338ca;
      color: #e0e7ff;
    }

    .btn-copy:hover {
      background: #4f46e5;
      box-shadow: 0 0 16px #4338ca44;
    }

    .btn-copy.copied {
      background: #059669;
      color: #d1fae5;
    }

    .btn-mark {
      background: #1e1e28;
      color: #71717a;
      border: 1px solid #2a2a35;
    }

    .btn-mark:hover {
      background: #27272f;
      color: #a1a1aa;
    }

    .btn-mark.active {
      background: #14532d;
      color: #86efac;
      border-color: #16a34a33;
    }

    .btn-whatsapp {
      background: #15803d;
      color: #dcfce7;
    }

    .btn-whatsapp:hover {
      background: #16a34a;
      box-shadow: 0 0 16px #15803d44;
    }

    @media (max-width: 600px) {
      body { padding: 1.25rem 0.75rem; }
      .clinic { padding: 1.125rem 1.25rem; }
      .actions { flex-wrap: wrap; }
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>Clinic Outreach</h1>
    <div class="stats">
      <span id="done-count">0</span> / <span id="total-count">0</span> done
    </div>
  </div>
  <div class="container" id="container"></div>

  <script>
    const DOMAIN_SUFFIX = 'seo-doctor.ro';
    const DONE_KEY = 'clinics-done';

    function loadDone() {
      try { return JSON.parse(localStorage.getItem(DONE_KEY) || '{}'); } catch { return {}; }
    }

    function saveDone(done) {
      localStorage.setItem(DONE_KEY, JSON.stringify(done));
    }

    function updateStats(total) {
      const done = loadDone();
      const count = Object.values(done).filter(Boolean).length;
      document.getElementById('done-count').textContent = count;
      document.getElementById('total-count').textContent = total;
    }

    function toggleDone(subdomain, total) {
      const done = loadDone();
      done[subdomain] = !done[subdomain];
      saveDone(done);
      updateStats(total);

      const el = document.getElementById('clinic-' + subdomain);
      const btn = el.querySelector('.btn-mark');
      if (done[subdomain]) {
        el.classList.add('done');
        btn.classList.add('active');
        btn.innerHTML = '&#10003; Done';
      } else {
        el.classList.remove('done');
        btn.classList.remove('active');
        btn.innerHTML = '&#9675; Mark done';
      }
    }

    function copyText(subdomain, text, total) {
      navigator.clipboard.writeText(text).then(() => {
        const btn = document.getElementById('copy-' + subdomain);
        btn.classList.add('copied');
        btn.innerHTML = '&#10003; Copied';
        setTimeout(() => {
          btn.classList.remove('copied');
          btn.innerHTML = '&#128203; Copy';
        }, 2000);

        const done = loadDone();
        if (!done[subdomain]) {
          toggleDone(subdomain, total);
        }
      });
    }

    function getWhatsAppUrl(phone, text) {
      const cleaned = phone.replace(/[^0-9+]/g, '');
      return 'https://wa.me/' + cleaned.replace('+', '') + '?text=' + encodeURIComponent(text);
    }

    function formatPhone(phone) {
      // +40751106451 -> 0751 106 451
      const m = phone.match(/^\+40(\d{3})(\d{3})(\d{3})$/);
      if (m) return '0' + m[1] + ' ' + m[2] + ' ' + m[3];
      return phone;
    }

    function buildScript(clinic) {
      const link = 'https://' + clinic.subdomain + '.' + DOMAIN_SUFFIX;
      return `BunÄƒ ziua,

VÄƒ contactÄƒm Ã®n legÄƒturÄƒ cu un website dedicat cabinetului dumneavoastrÄƒ stomatologic.

PuteÈ›i vizualiza website-ul aici: ${link}

Toate serviciile vor fi personalizate È™i prezentate pe pagini dedicate cabinetului dumneavoastrÄƒ.

AÈ™teptÄƒm cu interes rÄƒspunsul dumneavoastrÄƒ.`;
    }

    function buildScriptHTML(clinic) {
      const link = 'https://' + clinic.subdomain + '.' + DOMAIN_SUFFIX;
      return `BunÄƒ ziua,

VÄƒ contactÄƒm Ã®n legÄƒturÄƒ cu un website dedicat cabinetului dumneavoastrÄƒ stomatologic.

PuteÈ›i vizualiza website-ul aici: <span class="script-link">${link}</span>

Toate serviciile vor fi personalizate È™i prezentate pe pagini dedicate cabinetului dumneavoastrÄƒ.

AÈ™teptÄƒm cu interes rÄƒspunsul dumneavoastrÄƒ.`;
    }

    async function init() {
      const resp = await fetch('./contacts.json');
      const clinics = await resp.json();
      const container = document.getElementById('container');
      const done = loadDone();

      clinics.forEach((clinic) => {
        const subdomain = clinic.subdomain;
        const link = 'https://' + subdomain + '.' + DOMAIN_SUFFIX;
        const script = buildScript(clinic);
        const scriptHTML = buildScriptHTML(clinic);
        const isDone = !!done[subdomain];
        const phoneDisplay = formatPhone(clinic.phone);

        const div = document.createElement('div');
        div.className = 'clinic' + (isDone ? ' done' : '');
        div.id = 'clinic-' + subdomain;

        div.innerHTML = `
          <div class="clinic-top">
            <div class="clinic-name">${clinic.clinic_name}</div>
          </div>
          <div class="clinic-meta">
            <span>${clinic.city}, ${clinic.county}</span>
            <span class="sep">&middot;</span>
            <a href="tel:${clinic.phone}">${phoneDisplay}</a>
            <span class="sep">&middot;</span>
            <a href="${link}" target="_blank">${subdomain}.${DOMAIN_SUFFIX}</a>
          </div>
          <div class="script-box">${scriptHTML}</div>
          <div class="actions">
            <button class="btn-copy" id="copy-${subdomain}" onclick="copyText('${subdomain}', buildScript(clinicMap['${subdomain}']), ${clinics.length})">&#128203; Copy</button>
            <button class="btn-whatsapp" onclick="window.open(getWhatsAppUrl('${clinic.phone}', buildScript(clinicMap['${subdomain}'])), '_blank')">&#128172; WhatsApp</button>
            <button class="btn-mark ${isDone ? 'active' : ''}" onclick="toggleDone('${subdomain}', ${clinics.length})">${isDone ? '&#10003; Done' : '&#9675; Mark done'}</button>
          </div>
        `;

        container.appendChild(div);
      });

      // Build a lookup map for onclick handlers
      window.clinicMap = {};
      clinics.forEach(c => { window.clinicMap[c.subdomain] = c; });

      updateStats(clinics.length);
    }

    init();
  </script>
</body>
</html>
